# DIAGNOSIS
Version = 5.0.0  Date = 11/16/2021 StdVar = &\_vdw\_dx

## Subject Area Description
The DIAGNOSIS table contains all recorded diagnoses associated with the encounters indicated in the ENCOUNTERS table with the exception of admitting diagnoses for inpatient stays.


| Variable Name            | Definition                                                                                                                                                                                                                                               | Type(Len) | Values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Implementation Guidelines                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| MRN                      | Medical record number is the unique patient identifier within a site and should never leave the site                                                                                                                                                     | char(\*)  | Unique to each patient at each site                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ADATE                    | Refer to the ADATE variable on the ENCOUNTER table for definition, type, length, and value set. This variable's redundancy is to improve querying performance.                                                                                           |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Expected to match the adate value in the encounter table for the same ENC\_ID value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ENCTYPE                  | Refer to the ENCTYPE variable on the ENCOUNTER table for definition, type, length, and value set. This variable's redunancy is to improve querying performance.                                                                                          |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Expected to match the enctype value in the encounter table for the same ENC\_ID value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ENC\_ID                  | Foreign key to the ENCOUNTER table uniquely identifying the encounter.                                                                                                                                                                                   | char(\*)  | Unique to each encounter at each site.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| PROVIDER                 | Refer to the PROVIDER variable on the ENCOUNTER table for definition, type, length, and value set. This variable's redundancy is to improve querying performance.                                                                                        |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Expected to match the provider value in the encounter table for the same ENC\_ID value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| DIAGPROVIDER             | Identifies the provider that made the diagnosis. If unknown, set the value equal to the PROVIDER varaible.                                                                                                                                               | char(\*)  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| DX                       | The diagnosis made. For ICD diagnosis coding, include decimal points in the value.                                                                                                                                                                       | char(\*)  | ICD-9-CM Format ###.##, V##.##, E###.#<br>ICD-10-CM Format  A#@.@@@@ (3-8 characters - includes a decimal point (except for 3 digit codes))<br>First digit is alpha (A); Digit 2 is numeric (#); Digits 3-7 are alpha or numeric (@)<br>[CMS Dx Codes](http://www.cms.gov/Medicare/Coding/ICD9ProviderDiagnosticCodes/index.html)                  | All alpha characters should be UPPERCASE.<br><br>ICD-9-CM and ICD-10-CM codes don't overlap except for 3,4 and 5 digit codes that begin with "V".  These "V" codes are extremely common in ICD-9-CM but far less common in ICD-10-CM.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| DX\_CODETYPE             | The coding set used in the DX variable for this record.                                                                                                                                                                                                  | char(2)   | 07=’ICD-7-CM’ (including 'ICD-7')<br>08=’ICD-8-CM’ (including 'ICD-8')<br>09=’ICD-9-CM’ (including 'ICD-9')<br>10=’ICD-10-CM’ (including 'ICD-10')<br>11=’ICD-11-CM’ (including 'ICD-11')<br>OT=’Other’                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ORIGDX                   | The diagnosis code as reported in source data without standardization or cleaning.                                                                                                                                                                       | char(\*)  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| PRINCIPAL\_DX            | For hospital admissions, whether this diagnosis is the principal discharge diagnosis of the encounter. The principal diagnosis indicates the main reason why the patient was admitted to the hospital for care and the value on which a DRG is assigned. | char(1)   | P = Principal diagnosis<br>N = Not principal diagnosis<br>X = Unknown or not classifiable                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Assigned after discharge after review by the medical record department, the principal diagnosis is main reason why the patient was admitted to the hospital for care.  This is the diagnosis on which the DRG is based.  Note that the principal diagnosis is very different from the admitting diagnosis which is assigned at the beginning of the stay.  For example, if a patient was admitted to a hospital with an admitting diagnosis of chest pain which was later diagnosed as a heart attack during the stay, the principal diagnosis would be heart attack.<br><br>Specify principal diagnosis as defined by the site’s institutional source data.   It is expected that there should be one and only one principal diagnosis per hospitalization.  For claims systems, the principal diagnosis may be found in the UB facility bill (field number 67 in UB 92 and UB 04 or “2300 HI01-2” on the electronic form) which should be the first diagnosis code listed.  If there are multiple UB facility bills for a stay, identify the principal diagnosis from the final/last facility bill.  If there are multiple final bills on the last date, use the one with the longest LOS.  While the value “P” is expected to only be specified for inpatient and institutional stays, it is allowed for other encounter types if it is clearly identified in the source data.  However in most typical cases for other encounters, the principal\_dx should be set to “N”.   If the source data does not identify principal diagnosis (or not principal) for specific inpatient and institutional stays, then set Principal\_dx to “X” for all diagnoses.                                                                                                                                                                                                                                                                                                                                                                                        |
| PRIMARY\_DX              | Whether this diagnosis is the primary diagnosis of the encounter. The primary diagnosis is the most serious or resource intensive diagnosis and is the primary reason for the procedures being rendered.                                                 | char(1)   | P = Primary diagnosis<br>S = Secondary diagnosis<br>X = Unknown or not classifiable                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Primary diagnosis is the illness or injury that was the most serious/severe/life-threatening and/or resource intensive.  From a claims perspective, it is the main reason for a provider's services being rendered (and billed/paid for).  Multiple primary diagnoses are allowed if the final/last professional claim can’t be determined using the criteria above or if the primary diagnosis was a local combination code that has to be put into multiple records to have values within a standard coding system.<br><br>Specify primary diagnosis as defined by the site's institutional source data. For an outpatient encounter, it is expected that there should be one and only one primary diagnosis. For an inpatient stay, there can be multiple primary diagnoses, one for each provider claim during the stay. A provider may have multiple claims during a stay, each with a primary diagnosis. If multiple bills were submitted for a claim, choose the final/last professional bill. For claims systems, the primary diagnosis may be found in the HCFA professional bill (field number 21.1 in the HCFA 1500 or "2400 SV107-1" in the electronic form) which is the first diagnosis code listed. The other diagnoses on this bill should be identified as "S" (Secondary Dx). The values "P" (Primary Dx) and "S" (Secondary Dx) should only be specified for encounters where there's a clearly defined primary diagnosis in the source data. Thus, if the source data does not identify primary or secondary diagnoses for a specific encounter, then set all diagnoses for that encounter to "X" (Not Classifiable). If all diagnoses for an encounter are reported as secondary in the source data, then set primary\_dx="S" (Secondary DX).<br><br>Multiple primary diagnoses are allowed if the final/last professional claim can't be determined using the criteria above or if the primary diagnosis was a local combination code that has to be put into multiple records to have values within a standard coding system. |
| SOURCE\_DATA\_DX         | Classification of the database that was used to create this record.                                                                                                                                                                                      | char(1)   | E = Your site's EHR (Electronic Health Record) operated by your health care organization. Excludes claims and billing data. This category includes the following:<br>• Direct extract from your site's EHR (or associated reporting database).<br>• A secondary database that houses your site's EHR data (no code changes for billing)<br>• Data for services captured in other local systems (such as a separate lab or radiology system) and interfaced into your site's EHR.<br><br>B = Billing data--for services performed by your organization and captured in your org's EHR, but formatted for billing an outside insurer. These are sometimes referred to as 'internal' or 'outgoing' claims, or transaction data.<br><br>C = Claims data--for services performed outside of your health care organization, presented to your organization for payment as the patient's insurer.<br><br>L = Local data source but unrelated to your site's EHR . Often Includes pre-EHR systems prior to EHR implementation such as appointment management systems.<br><br>O = Other. Not from the sources listed above.<br><br>U = Unknown | May be used to:<br>1\. determine differences of care quality<br>2\. Can use to compare completeness of data capture. <br>3\. Can report % of data from EHR versus claims<br><br>Billing data are typically derived from a site's EHR data but are coded as outgoing claims data.  Users may want to combine Billing data with either EHR data or Claims data, depending on the research question.<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

## Primary Key
ENC_ID + DX + ORIGDX + DIAGPROVIDER + DX_CODETYPE

## Foreign Keys

|Source Variable|Target Table  |Target Variable<br>(Primary Key)|Orphans allowed?|
|---------------|--------------|--------------------------------|----------------|
| MRN           | DEMOGRAPHICS | MRN                            |No              |
| ENC_ID        | ENCOUNTER    | ENC_ID                         |No              |
| PROVIDER      | PROVIDER     | PROVIDER                       |No              |
| DIAG_PROVIDER | PROVIDER     | PROVIDER                       |No              |

## Comments

Do **NOT** include diagnoses in a problem list.

Do **NOT** include admitting diagnoses for inpatient stays

**Do** include diagnoses from professional and inpatient rounding services
Consider using SAS compress option to reduce the size of the file and improve I/O processing



